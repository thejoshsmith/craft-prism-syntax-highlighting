{# @var craft \craft\web\twig\variables\CraftVariable #}
{#
/**
 * Prism Syntax Highlighting plugin for Craft CMS 3.x
 *
 * Prism Syntax Highlighting Settings.twig
 *
 * @author    Josh Smith <me@joshsmith.dev>
 * @copyright Copyright (c) 2019 Josh Smith <me@joshsmith.dev>
 * @link      https://www.joshsmith.dev
 * @package   PrismSyntaxHighlighting
 * @since     1.0.0
 */
#}

{% import "_includes/forms" as forms %}

{% do view.registerAssetBundle("thejoshsmith\\prismsyntaxhighlighting\\assetbundles\\prismsyntaxhighlighting\\PrismSyntaxHighlightingAsset") %}

<h2>{{ "General Settings"|t('craft-prism-syntax-highlighting') }}</h2>
<p>{{"Configure the default syntax highlighting options"|t('craft-prism-syntax-highlighting')}}</p>

{{ forms.multiselectField({
    label: 'Themes',
    instructions: 'What themes should be available for new fields?',
    id: 'editorThemes',
    name: 'editorThemes',
    values: settings['editorThemes'],
    options: settings.getThemes(),
    tip: 'This sets the selection of themes that can be selected on fields.',
    class: 'selectize fullwidth'})
}}

{{ forms.multiselectField({
    label: 'Syntax',
    instructions: 'What languages should be available to new fields?',
    id: 'editorLanguages',
    name: 'editorLanguages',
    values: settings['editorLanguages'],
    options: settings.getLanguages(),
    tip: 'This sets the highlighting syntax that can be selected on fields.',
    class: 'selectize fullwidth'})
}}

{{ forms.textField({
    label: 'Height',
    instructions: 'How many rows should the editor will be displayed at?',
    id: 'editorHeight',
    name: 'editorHeight',
    value: settings['editorHeight']})
}}

{{ forms.textField({
    label: 'Tab Width',
    instructions: 'What should the tab width be? This uses the experimental CSS property `tab-size`.',
    id: 'editorTabWidth',
    name: 'editorTabWidth',
    value: settings['editorTabWidth']})
}}

{{ forms.lightswitchField({
    label: 'Line Numbers',
    instructions: 'Should line numbers be displayed?',
    id: 'editorLineNumbers',
    name: 'editorLineNumbers',
    on: settings['editorLineNumbers']})
}}
<hr>
<h2>{{ "Custom Settings"|t('craft-prism-syntax-highlighting') }}</h2>
<p>Set a directory path for your custom CSS. You'll need to edit the plugin config to set which custom themes are selectable.</p>

{{ forms.autosuggestField({
    label: "Theme Directory"|t('craft-prism-syntax-highlighting'),
    instructions: "The path to the theme directory where your custom CSS files are located."|t('craft-prism-syntax-highlighting'),
    id: 'customThemesDir',
    class: 'ltr',
    name: 'customThemesDir',
    suggestEnvVars: true,
    suggestAliases: true,
    value: settings['customThemesDir'],
    errors: settings['customThemesDir'],
    required: true,
    placeholder: "/path/to/css/folder"|t('craft-prism-syntax-highlighting')
}) }}

{% js %}
    $(function () {
        $('#{{craft.app.view.namespaceInputId('editorThemes')}}, #{{craft.app.view.namespaceInputId('editorLanguages')}}').selectize({
            plugins: ['remove_button'],
            dropdownParent: 'body'
        });
    });
{% endjs %}
